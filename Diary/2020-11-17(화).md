### 2020-11-17

-----
##### 1. 학습 날짜
- 2020-11-17

-----
##### 2. 학습 시간
- 08:00 ~ 21:00

-----
###### 3. 학습 범위 및 주제
- 웹서버 설계 및 구현

-----
##### 4. 동료 학습 방법
- slack

-----
##### 5. 학습 목표
- 서버의 동작 방식을 익히고 그에 맞게 설계 및 구현을 한다.

-----
##### 6. 과제 제출
- https://github.com/get-Pork-Belly/Webserv

-----
##### 7. 상세 학습 내용

- 웹서버
    - 오전, 점심 무렵에는 어제 완성했다고 생각한 CGI, Chunked를 수정하는 시간을 가졌다. 일단 어제 CGI에 대해서 동적할당 하는 과정을 추가해줬었는데, 이것때문에 속도 저하가 많이 왔었다. 어제 그렇게 많은데에는 분명한 이유가 있었는데 오늘 iwoo 님이 지적해주셔서 다시 동적할당을 사용하지 않는 방법으로 전환했는데 문제가 생기기는 커녕 속도가 여섯배 이상 빨라졌다. 코드를 짤 때 더욱 신중하게 짜야겠다고 생각하는 계기도 되었고 동적할당이 속도에 얼마나 큰 영향을 미치는지에 대해서도 알게되었다.
    - 이후에는 다른 팀원들에게 CGI에 대한 작업을 맡기고 나는 Request method 처리를 하게 되었다. 이 부분은 많이 부족한 탓에 rfc를 다시 찬찬히 분석하면서 진행했다. 그리고  설계를 마치고 나서 구현에 들어갔다.
    - 일단 설계를 다 하고 구현에 들어가서그런지 생각없이 구현할 때 보다는 훨씬 수월하게 코딩이 진행되었다. 하지만 설계를 100% 완벽하게 하지 못하고 거의 30%밖에 못했기 때문에 예상치 못한 동작이 많이 생겼다. 일단 우리가 구현해야 하는 메써드들의 특징을 나열하자면
        - GET: 정적 리소스를 요청한다. URI에 따라서 CGI를 실행시키고 그 결과값을 리턴 받을 수도 있다.
        - HEAD: GET과 단 한가지를 제외하고는 모든점이 같다. 다른 것은 클라이언트에게 응답을 보내줄 때 body를 제외하고 보낸다는 점이다.
        - POST: body를 갖고 요청이 들어온다. body는 주로 CGI를 요청할 때 사용된다.
        - PUT: 파일을 웹서버에 업로드 할 때 사용된다. PUT의 결과는 두 가지로 나눠지는데, (실패를 제외하고 파일이 업로드 됐을 때) 기존에 파일이 존재했는데 이 파일을 새로 쓰게 되는 경우와 파일이 처음부터 없었을 경우다. 첫 번째 경우는 204 status code를 갖고 Location 헤더를 제외한 상태로 응답을 보낸다. 두 번째 경우는 201 status code와 Location 헤더를 응답으로 보내준다.

        - OPTIONS: 이 메써드는 요청으로 들어간 URI의 라우터를 보고 해당하는 라우터가 허용하는 method를 응답의 `Allow: ` 헤더에 붙여서 보낸다.
        - TRACE: 요청의 `Request line`과 `Headers`를  응답의 body로 설정하고 클라이언트에게 전송한다.
        - DELETE: URI가 요청하는 파일을 `삭제` 한다. 이 때 사용되는 함수는 `unlink`다. 이 메써드는 파일의 삭제를 보장하지는 않는다.

 -----
##### 8. 오늘 학습 내용에 대한 개인적인 총평
- 이제 거의 막바지에 왔다 좀만 더 힘내면 될 것 같다.

-----

##### 9. 다음 학습 계획

- 웹서버 설계 및 구현
