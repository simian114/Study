### 2020-11-04

-----
##### 1. 학습 날짜
- 2020-11-04

-----
##### 2. 학습 시간
- 08:00 ~ 20:00

-----
###### 3. 학습 범위 및 주제
- 문제풀이
- 웹서버 설계 및 구현

-----
##### 4. 동료 학습 방법
- slack

-----
##### 5. 학습 목표
- 서버의 동작 방식을 익히고 그에 맞게 설계 및 구현을 한다.
- 문제풀기

-----
##### 6. 과제 제출
- https://github.com/get-Pork-Belly/Webserv
- https://github.com/leecoleecolee/ProblemSolving/tree/sanam

-----
##### 7. 상세 학습 내용
- 웹서버
    - 오늘의 목표는 cgi를 실행시키는 것. 하지만 오류가 많아도 너무 많았다. 우선 curl 명령어로 데이터를 보내면 이상하게 클라이언트에게 데이터를 보내지 않는 에러가 있었다.. 이 에러는 curl 명령어의 특징 때문에 발생한 것으로, 형식에 맞지 않는 데이터가 curl 명령어의 결과로 수신되면 curl이 서버로부터 받은 리스폰스를 사용자에게 보여주지 않는 문제. 이 문제는 `curl ~~ -v` 옵션을 주면 형식에 맞지 않는 데이터가 수신되었을 때 이를 무시하지 않고 사용자에게 보여준다. 또 다른 문제로는 cgi를 실행시켰을 때, 무한반복에 빠지는 현상이 발생했다. 무한반복이 되더라도 리스폰드를 한번은 보내야 할 텐데 리스폰드를 보내주지 않고 무작정 반복이 되었던 상황. 이 문제는 body가 있는 리퀘스트를 받았을 때 발생하는데, 바디를 읽고나서 바로 client_socket의 writeset을 업 시켜버려서 서버가 리소스를 읽지 않고 계속 receive만 하는 상황이 발생했던 것. 따라서 경우에 따라 write 를 나중에 처리할 수 있게 만들었다.
    - 이 문제까지는 그래도 해결했지만 해결하지 못한 문제가 있었다. cgi를 실행시키는 것. cgi가 실행되기 위해서는 몇몇의 환경변수가 세팅이 되어야한다. 하지만. cgi를 실행시키면 잘 세팅했다고 생각하는 cgi가 동작하지 않았다. 해결하기 위해 몇시간 동안 눈물의 똥꼬쑈를 했지만... 결국 해결하지 못했다. 일단 의심되는 문제는 리퀘스트를 받았을 때 이를 cgi로 판별하는 로직 자체가 문제가 있다고 생각된다. 흠... 모르겠다.
    - 또한 수정해야 할 것이 하나 있다. nginx를 살펴보면 `/folder`라는 라우트의 root로 '/Users/sanam/`이 있다고 하면 `/folder/index.html'로 리퀘스트를 보내면 실제로 가는 곳인 `/Users/sanam/folder/index.html` 이다. 하지만 우리의 pdf는 이런 경우 `/Users/sanam/index.html`을 받기를 원한다. 따라서 이 부분을 수정해야한다.


 -----
##### 8. 오늘 학습 내용에 대한 개인적인 총평
- 하... 난 너무 멍청하다..

-----

##### 9. 다음 학습 계획

- 웹서버 설계 및 구현
- 문제풀이
