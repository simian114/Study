### 2020-10-15

-----
##### 1. 학습 날짜
- 2020-10-15

-----
##### 2. 학습 시간
- 08:00 ~ 20:30

-----
###### 3. 학습 범위 및 주제
- 문제풀이
- 웹서버 설계 및 구현

-----
##### 4. 동료 학습 방법
- slack

-----
##### 5. 학습 목표
- 웹서버 `ServerGenerator` 클래스 구현
    - `parseHttpConfig` 구현
    - `setHttpConfig`
    - `setServerConfig`
    - `setLocationConfig`
- 문제풀이

-----
##### 6. 과제 제출
- https://github.com/get-Pork-Belly/Webserv
- https://github.com/leecoleecolee/ProblemSolving/tree/sanam

-----
##### 7. 상세 학습 내용

- `ServerGenerator` 클래스 
    - simple directives에 여러개의 values가 올 때 문제점.
        - 기존에는 하나의 지시어에 대해서 공백을 기준으로 split하고 [0]을 key, [1]을 value로 하는 맵을 만들었었다. 하지만 이렇게 할 경우 `index index.html index.htm index.php` 와 같은 지시어가 들어올 때 문제가 생긴다. 이 문제의 해결방법은 조금 쉬웠다.. 왜냐하면 성능을 신경쓰지 않아도 되는 부분이었기 때문이다. 만약 split 된 결과가 담기는 vector의 크기가 2 보다 크다면 0 번째 밸류의 값을 제외한 모든 문자열을 다시 += 오퍼레이터로 합치면 되기 때문.
    - http parser 메써드
        - 이 메써드는 nginx config의 server 블록을 파싱할 때 http에만 존재하는 simple directive만을 파싱한다. 이 simple directive는 이제부터 전역적으로 작동하기 때문에 server 블록을 파싱하기 전에 미리 만들어 놓아야하기 때문에 이 함수를 만들었다. 함수의 동작 방식은 이전에 만들어 놓았던 `parseServerBlock`을 이용해서 값은 돌려 받지 않지만 이터레이터만 움직이면서 http을 파싱한다.

    - set 메써드
        - nginx config 파일의 내용들은 각 지시어에 따라 포함될 수 있는 범위가 있다. 일반적인 지시어들은 어떤 블록이 오던간에 포함이 될 수 있다. 만약 server 블록에는 없지만 http 블록에 있다면 서버는 http 블록에 있는 정보를 받아서 생성될 것이다. 즉 server의 config는 http의 설정을 상속 받는다. 이후 server을 파싱하면서 `구체화`를 시킨다.
        - 따라서 구체화(파싱)을 하기전에 미리 상속(set)을 하는 방법을 생각했다.

- 문제풀이
    - 균형이진트리
        - 균형이진트리랑 현재 노드를 기준으로 왼쪽의 하위 트리 높이와 오른쪽의 하위트리 높이의 차가 1 이하인 것을 의미한다. 이진트리의 정의 자체가 재귀적이므로 이 트리의 정의 또한 재귀적이다. 나는 `dfs`방식을 이용해서 문제를 풀었다. dfs를 이용해서 리프노드 까지 이동한 후 만약 리프노드라면 자신의 높이를 return 하게 하는 것이다. 그렇게 되면 쌓여있는 함수스택이 풀리면서 부모노드는 자식의 높이를 받게된다. 부모는 left, right 모두에게 이 함수를 실행했으므로 left, right의 높이를 모두 알 수 있게 된다. 이후 left와 right의 높이를 비교한다. 만약 이 값의 절대값이 1 보다 크다면 이건 균형트리가 아니다.
        - 위의 로직을 이용해서 아주 간단하게 구현했다.

    - 최소 높이 트리
        - 지금까지으 트리 문제는 이진 트리 문제였지만 이번 문제는 이진트리가 아닌 undirectied 면서 동시에 다중트리에 관한 문제였다. 주어진 노드 간의 연결성을 이용해서 하나의 트리를 만들었을 때 그 높이를 최소로 하는 루트를 구하는 문제다. 문제의 해결 방법에 대해서는 어느정도 구현했지만 `어떻게`에 관해서는 직관이 떠오르지 않아서 정답을 보았다. 정답은 매우 간단했다. 각 루트를 반복하면서 정답을 구하는게 아닌, 리프노드들을 잘라 나가면서 정답을 구하는 것이었다. 솔직히 아직도 모르겠다... 구현만 가능한 괴물이 되어버렸다...

-----
##### 8. 오늘 학습 내용에 대한 개인적인 총평
- 흠... 프로그래머는 개발과 설계 모두 중요한 것 같다. 그런 측면에서 보았을 때 나는 코딩도 못하지만, 설계는 정말 속터지게 못하는 것 같다. 이런 내가 과연 개발자가 될 수 있을까?

-----

##### 9. 다음 학습 계획

- 웹서버 설계 및 구현
- 문제풀이
