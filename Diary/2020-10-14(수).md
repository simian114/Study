### 2020-10-14

-----
##### 1. 학습 날짜
- 2020-10-14

-----
##### 2. 학습 시간
- 08:00 ~ 20:30

-----
###### 3. 학습 범위 및 주제
- 문제풀이
- 웹서버 설계 및 구현

-----
##### 4. 동료 학습 방법
- slack

-----
##### 5. 학습 목표
- 웹서버 `ServerGenerator` 클래스 구현
- 문제풀이

-----
##### 6. 과제 제출
- https://github.com/get-Pork-Belly/Webserv
- https://github.com/leecoleecolee/ProblemSolving/tree/sanam

-----
##### 7. 상세 학습 내용
- 웹서버 설계 및 구현
    - `ServerGenerator` 클래스 에러 수정
        - 테스트가 불가능한 상태였기 때문에 내 생각에 근거해서 코드를 작성했었다... 그래서 문제가 진짜 엄청나게 쏟아졌다....
        - 테스트를 하다보니 계속 메모리 침범 에러가 발생했다. 솔직히 c++를 사용하기도 하고 소멸자가 대부분의 동적할당을 해결해주는데 어디서 메모리 문제가 발생하는지 정말 난감했었다. 문제는 메모리의 누수가 아닌 침범이었다. `iterator`을 사용하는 과정에서 `end`를 만났는데도 ++ 를 해주는 코드가 있었다. c++를 사용한다고 해서 방심하면 안되겠다. 주의하자.

        - 설계 바꾸기. 원래 location에 대한 설정 부분은 구조체로 만들기로 했었다. 하지만 이렇게 될 경우 파일을 파싱하면서 동적으로 값을 할당하는 부분에서 구현이 힘들어진다. 따라서 이 부분을 구조체가 아닌 `MAP` 자료구조로 해결하기로 했다. 
        -설정 부분을 맵으로 바꾸는거까지는 좋았지만, 하나의 서버에 여러개의 location이 들어오는 부분에 관해서는 해결하지 못했었다. 따라서 결국 로케이션의 라우팅 주소를 키 값으로 하고 로케이션 맵 자신을 키.맵으로 하는 맵에 넣어서 다수의 로케이션 설정을 하나의 변수에 넣었다. 아래와 같은 모습이다.
        `std::map<std::string, std::map<std::string, std::string> > locations`
        
   - 해결해야 하는 부분
       - 코드 정리
       - 테스트 파일 제대로 만들기
       - `http` 블록 파싱 만들기
       - `setLocationBlock` 함수 완성하기.
       - `index index.html index.htm` 과 같이 밸류에 해당하는 값이 긴 경우 처리하기.
    
- 문제풀이
    - 이진트리의 배열화, 배열의 이진트리화
        - 먼저 이진트리의 배열화 문제는 `BFS` 방식을 이용해서 아주 수월하게 구현할 수 있었다. 배열을 디큐에 넣음으로써 `popleft` 가 가능하게 만들고 이를 이용해서 하나씩 빼면서 트리를 만들어 준다. `BFS`를 이용해서도 간단하게 만들 수 있지만, `DFS`를 이용하면 더 쉽게 만들수 있다. 다음에 꼭 만들어 보자.

-----
##### 8. 오늘 학습 내용에 대한 개인적인 총평
- 정말로 오랜만에 코딩다운 코딩을 한 것 같다... exam-rank05는 떨어졌지만 뭐.. 나쁘지 않은 하루였다.

-----

##### 9. 다음 학습 계획

- 웹서버 설계 및 구현
- 문제풀이
