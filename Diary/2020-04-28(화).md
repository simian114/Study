### 2020-04-28(화)

-----

##### 1. 학습 날짜

- 2020-04-28(화)

-----

##### 2. 학습 시간

- 11:00 ~ 13:00, 16:00 ~ 21:30

-----

##### 3. 학습 범위 및 주제

- minishell
- quote

-----

##### 4. 동료 학습 방법

- slack

-----

##### 5. 학습 목표

- quote 입력 가능하게 만들기
- minishell에 fork가 왜 필요한가?
- pwd 명령어 구현

-----

##### 6. 과제 제출 주소

- https://github.com/simian114/minishell

-----

##### 7. 상세 학습 내용

- shell에서의 quote
  - 이 함수를 구현하는데 있어서 많은 어려움이 있었다... 일단 쉘 상에서는 quote로 ' 와 " 를 사용한다. 이 둘의 역할은 동일하다. quote로 두 가지 모두를 사용 가능하게 함 으로써 quote를 문자열 자체에 넣을 수 도 있고 인자의 구분자 역할을 하기도 한다. 따라서 쉘을 구현하는데 있어서 아주 기초적이면서 중요한 역할을 한다. 다만 구현하는데 조금 많은 어려움이 따랐다. 짝이 옳지 않으면 STDIN 상태가 되어서 계속 입력을 받도록 하는 함수를 만들어서 입력 값에 계속해서 더해줘야 하는데 이 부분을 하루 종일 구현하지 못했었다... 그래도 재귀를 사용함으로써 문제를 해결했다.
- shell에서의 fork()는 도대체 왜 사용할까?
  - 왜 fork가 minishell에서 사용 가능한 함수인지 minishell을 시작한 이후로 계속 생각해왔다. 그러다 오늘 갑자기 생각이 났다. 물론 내 생각이라서 틀릴 수도 있지만 일단 정리를 해본다.
  - 일반적인 bash나 zsh에서 어떤 명령을 내린다고 가정해보자. 그 명령은 완료되는데 시간이 오래 걸릴 수 도 있고 또는 잘못된 입력으로 인해 멈춰있을 수 도 있다. 이 때 우리는 보통 Ctrl + c 를 통해서 그 명령을 벗어난다. 지금까지 아무 생각 없이 사용해 오던 이 Ctrl + c 는 SIGINT 시그널을 발생 시켜서 특정한 함수를 지정해주지 않으면 현재의 프로세스를 종료하는 역할, 즉 명령을 강제로 끝내는 역할을 해 왔다. 
  - 이제 이 생각을 minishell 로 넘겨보자. minishell에서의 어떤 명령이 수행되고 있다고 생각하자. 이 명령이 수행되는데 너무 오래 시간이 걸려서 그냥 지금 바로 종료해 버리고 싶을 때 우리는 자연스럽게 Ctrl + c 를 눌러서 SIGINT를 발생 시키고 현재의 프로세스(**minishell**)을 종료 시킬 것이다. 이 때 문제가 발생한다. 나는 minishell 에서의 명령을 종료하고 싶을 뿐인데 Ctrl + c 를 입력함으로써 minishell 자체를 종료해버렸다.
  - 그러므로 우리는 명령을 수행할 때, fork()를 이용해서 자식 프로세스를 생성하고 그 위에서 명령을 수행한 다음에 명령이 끝나면 자식을 종료 시키고 다시 부모로 돌아오는 매커니즘을 구현하면 되는거다.
  - 내 뇌피셜이므로 틀릴 수 도 있다.
- 컴파일 문제
  - 간신히 quote 함수를 만들었는데.. 이제는 컴파일 자체에서 문제가 생겨 버렸다. 일단 속 시원한 답을 알아내지는 못했지만 내가 해결한 방법은 makefile 수정이다. makefile에 CC= clang 로 지정해 놓았는데, 컴파일 명령에서 CC를 사용하지 않고 gcc로 사용하니깐 문제가 생겼던거다. 왜 문제인지는 모르겠지만 일단 바꿈으로써 해결은 됐다.
- 실제 코딩시간
	- 6시간

-----

##### 8. 오늘 학습 내용에 대한 개인적인 총평

- 꽤 오랫동안 의자에 않아서 코딩을 했는데도 정말로 아주 정말 조금의 코드밖에 짜지 못했다.... 너무 멍청한 것 같다. 심지어 중간에는 다 구현했는데 제대로 출력이 되지 않아서 다 지워버렸었다. 이 다 지운게 알고보니 프린트 자체의 문제였고 quote 함수 자체에는 문제가 없었었다.... 너무 멍청하다. 조금 머리를 쓰는 방식으로 코드를 구현하도록 노력해야겠다. 그래도 minishell을 구현은 너무 재밌다.

-----

##### 9. 다음 학습 계획

- ls 명령어
- pwd 명령어
- signal 사용법 익히기
