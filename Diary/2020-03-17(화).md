#### 2020-03-17(화)

-----

##### 1. 학습 날짜

- 2020-03-17

-----

##### 2. 학습 시간

- 00:00 ~ 04:00(집), 10:00 ~ 17:00(집), 18:00 ~ 22:00(집)

-----

##### 3. 학습 범위 및 주제

- Docker
- nginx

-----

##### 4. 동료 학습 방법

- 온라인으로 진행

-----

##### 5. 학습 목표

- Dockerfile 완성하기

-----

##### 6. 과제 제출 주소

[Ft_server](http://git.innovationacademy.kr/sanam/Ft_server)

-----

##### 7. 상세 학습 내용

- debian-buster 환경에서 server를 만드는 과정을 자동화하는 Dockerfile을 만들었다.
- Dockerfile을 만드는 과정은 겉으로 보기에는 쉬웠지만 하나하나 쌓아나가다 보니 문제점이 많이 생겼다.
  - ssl이 적용되지 않는 문제
    - dockerfile을 빌드 할 때 RUN 이라는 명령어를 이용하는데, 이 RUN이 발생할 때 마다 이미지를 새로 만들고 그 이미지로 컨테이너를 실행시켜서 그 환경에서 명령어를 실행시키고 그런 다음 다시 이미지로 만드는 과정을 갖는다고 한다. 나는 처음에 이런 과정을 모르고 RUN을 막 사용했다가 환경이 꼬여서 ssl이 실행되지 않는 문제가 생겼다. 이 문제의 해결은 ssl 관련한 설정을 dockerfile 마지막 즈음으로 옮김으로 써 해결했다.
  - wordpress, phpmyadmin과 같은 사이트로 연결되지 않는 문제
    - 이 문제도 위와 마찬가지로 순서의 문제였다. 
  - 설정파일
    - 이미지를 생성할 때 필요한 설정 파일들이 있는데 이 설정 파일들은 로컬 환경에서 미리 만들어 놓고 빌드 할 때 복사해서 사용하도록 만들었었는데, 이상하게 이 설정 파일들이 적용이 되지 않았었다. 이 문제도 위와 마찬가지로 순서의 문제였다. 어떤 설정 파일들은 소프트웨어를 install 할 때 자동으로 생기는데, install 하기 전에 먼저 설정 파일들을 복사해 놓으면 그 설정이 기본 default로 바뀌게 된다. 이 문제도 명령어의 순서를 바꿈으로써 해결했다.
  - 빌드 한 이미지를 실행했을 때 바로 꺼짐
    - 이 문제는 tail 명령어를 이용해서 명령이 끝나지 않게 만듦으로 써 해결했다.  

<br>

- 실제 코딩 시간
  - 10시간

-----

##### 8. 학습 내용에 대한 개인적인 총평

- 월, 화에 걸쳐서 일요일에 만들었던 서버를 자동화 시키는 작업을 했지만, 많은 진도를 나가지 못했다. 솔직히 일요일에 서버를 만들었을 때 자동화 시키는 작업이 매우 쉬워 보였는데 막상 Dockerfile을 만들어 보니깐 잘하지는 못하고 있는거 같다. ssl, phpmyadmin, wordpress 모두를 다 성공적으로 띄울 수 있지만 왜인지는 몰라도 화면을 띄우면 무조건 wordpress로 redirect되는 문제가 있고 또 atuoindexing도 해결을 하지 못하고 있다. 그리고 만들기는 만들고 있지만 결국 아무것도 모르고 그냥 만드는 거라 내 자신이 너무 한심하다.

-----

##### 9. 다음 학습 계획

- nginx 설정 파일 공부
- atuoindex 공부
- ft_server 디버깅
- 네트워크 개념
- 네트워크 프로그래밍