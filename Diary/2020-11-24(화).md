### 2020-11-24

-----
##### 1. 학습 날짜
- 2020-11-24

-----
##### 2. 학습 시간
- 08:00 ~ 20:00

-----
###### 3. 학습 범위 및 주제
- 웹서버 설계 및 구현

-----
##### 4. 동료 학습 방법
- slack

-----
##### 5. 학습 목표
- 서버의 동작 방식을 익히고 그에 맞게 설계 및 구현을 한다.

-----
##### 6. 과제 제출
- https://github.com/get-Pork-Belly/Webserv

-----
##### 7. 상세 학습 내용

-  웹서버
    - 오늘은 테스터에서 생기는 에러를 잡았다. 하루종일 동안 하나의 에러만 잡았다.. 그것도 완벽하게는 잡지 못했다. 오늘 잡은 에러를 간단하게 설명해보자면 클라이언트가 리퀘스트를 보낼 때 우리의 서버는 완벽한 리퀘스트가 아니면 완벽하게 들어올 때 까지 MSG_EPPK으로 버퍼를 보기만하고 지우지 않는다. 이 때 클라이언트가 종료가 되면 클라이언트와 서버가 연결되어있는 스트림에는 데이터가 지워지지 않고 계속 남아있게 된다. 원래같은 경우라면 종료된 클라이언트에 대해서 read, recv를하면 0, -1이 나와야하지만 종료는 됐지만 버퍼가 지워지지 않아서 서버는 상대 클라이언트가 종료된걸 눈치채지 못한다. 상대방이 종료됐으므로 버퍼에있는 데이터들은 영원히 완벽한 요청이 되지 못하고 불완전항 상태로 남아앴게 된다. 그렇기 때문에 서버는 버퍼를 영원히 MSG_PEEK로 살펴보기만 하고 비우지를 못한다.
    - 이 경우를 간단하게 해결하면 TELNET으로의 통신이 불가능하게 된다. 따라서 조금은 뒤틀린(?) 방법을 사용했다. 멤버 변수를 하나 더 만드는 것. 변수를 만듦으로써 완벽하지 못한 요청이 온다면 일단 그 요청도 읽어서 새로 만든 변수에 넣고 버퍼를 비운다. 이 때 또 마지막의 CRLF까지 읽게 되면 TELNET으로 통신이 안되기 때문에 CRLF가 나오기 전까지만 읽게 만든다.
    - 하지만 이렇게 하면 하나의 경우에서 문제가 생긴다. 바로 완벽하지 못한 요청이 CRLF로 끝나는 경우다. 이렇게 되면 서버는 이걸 TELNET으로의 통신으로 판단하고 또 무한 반복하면서 읽는다.

-----

##### 8. 오늘 학습 내용에 대한 개인적인 총평
- 일단 조금 손 보기는 했지만 아직 부족한 것 같다.

-----

##### 9. 다음 학습 계획

- 웹서버 설계 및 구현
