### 2020. 05. 01(금)

-----

##### 1. 학습 날짜

- 2020-05-01

-----

##### 2. 학습 시간

- 12:00 ~ 17:00

-----

##### 3. 학습 범위 및 주제

- 전역변수

-----

##### 4. 동료 학습 방법

- slack

-----

##### 5. 학습 목표

- 전역 변수를 사용하는 방법 중에 어떤게 효율적인지 알아보고 사용하기

-----

##### 6. 과제 제출 주소

- https://github.com/simian114/minishell

-----

##### 7. 상세 학습 내용

- 전역변수

  - c언어 프로그램 내에서 전역변수를 사용하기 위해서는

    - ``` c
      int main(int argc, char **argv, char **envp);
      ```

  - 위와 같이 main의 선언을 해줄 때 envp를 같이 입력 해줘야 한다. 지금 내가 헷갈리는게 minishell에서 사용하는 전역변수가 zsh에서 사용하던 전역변수를 같이 공유 해야 할지 아니면 새롭게 만들어야 하는것이다. zsh의 전역변수를 사용하고 또 전역변수를 export 명령어로 추가하려면 putenv 처럼 만들어져 있는 함수를 사용해야 하는데 여기서는 사용 할 수가 없다. 따라서 나는 내가 만든 minishell 에서만 사용할 수 있는 전역변수를 만들기로 했다.

  - 일단은 간단하게 구현 방법은 하나의 config 파일을 만드는 거다. 이 파일에는 KEY=VALUE 와 같은 방식으로 입력이 저장되어 있고 우리가 $ 를 입력할 때 마다 get_next_line와 ft_strncmp를 사용해서 해당하는 변수가 있으면 가져오고 없으면 가져오지 않는 방법을 택했다. 이 방법이 구현은 간편하지만 lseek를 사용하지 못하는 minishell 프로젝트에서는 많이 비효율적이다.

  - 지금 막 생각난건데, 연결리스트를 사용하면 그나마 효율이 좋아질거 같다. 내일 구현해야겠다.

- 실제 코딩 시간

  - 5시간

-----

##### 8. 오늘 학습 내용에 대한 개인적인 총평

- 오늘은 이전부터 계속 미루어왔던 전역변수를 하기로했다. 그리고 어느정도는 구현을 했다. 하지만 내가 원하는 방식으로는 되지 않았다. 나는 파일을 open get next line을 하면서 원하는 변수를 찾는 방식을 원했지만 이렇게 파일을 open하고 읽은 다음에 파일을 쓰기 위해서는 lseek 으로 쓰기를 원하는 곳으로 가야하는데 이 프로젝트에서는 그러지 못한다. 따라서 전체의 내용을 하나의 char * 에 저장하고 파일을 초기화 한다음에 처음부터 다시 쓰는 무지막지하게 비효율적인 방법으로 구현을 해버렸다. 이 문서를 작성하는 중에 떠오른건데 이거 그냥 연결리스트로 구현을 하면 효율적으로 구현 할 수 있을거 같다. 내일의 상혁아 화이팅.

-----

##### 9. 다음 학습 계획

- 연결리스트
- 전역변수