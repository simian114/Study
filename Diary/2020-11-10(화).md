### 2020-11-10

-----
##### 1. 학습 날짜
- 2020-11-10

-----
##### 2. 학습 시간
- 08:00 ~ 19:30

-----
###### 3. 학습 범위 및 주제
- 문제풀이
- 웹서버 설계 및 구현

-----
##### 4. 동료 학습 방법
- slack

-----
##### 5. 학습 목표
- 서버의 동작 방식을 익히고 그에 맞게 설계 및 구현을 한다.
- 문제풀기

-----
##### 6. 과제 제출
- https://github.com/get-Pork-Belly/Webserv
- https://github.com/leecoleecolee/ProblemSolving/tree/sanam

-----
##### 7. 상세 학습 내용

- 파이프로 EOF를 전달하는법
    - 파이프는 출구와 입구 두 갈래로 나눠진다. 간단하게 예로 설명해 보겠다. 부모와 자식 프로세스가 있을 때, 부모가 자식에게 데이터를 넘겨주고 자식은 이 데이터를 받아서 어떤 동작을 수행한다고 하자. 이 때 파이프를 사용하면 자식과 부모간에 통신을 할 수 있다. 일단 부모에서는 자식에게 데이터를 넘겨주기만 하면 되므로 부모에서는 파이프의 입구만 사용하는 격이다. 반대로 자식 프로세스는 부모가 보낸 데이터가 파이프의 출구를 통해서 들어올 테니 파이프의 출구만을 사용하게 된다. 따라서 부모에서는 파이프의 출구를, 자식에서는 파이프의 입구를 사용하지 않으므로 바로 close를 하자.
    - 이후에 부모가 자식에게 데이터를 다 보내면 마지막으로 EOF를 보내야한다고 할때 어떻게 EOF를 보낼 것인가에 대해 생각해보자. 일반적으로 EOF는 -1로 define 되어있다. 하지만 파이프로는 문자열만 전달할 수 있다. 따라서 -1이라는 값은 전달할 수가 없다. 하지만 역시 우리의 천재들은 EOF를 보낼 수 있는 방법을 아주 간단하게 만들어 놨다. 바로 close 로 파이프를 닫아주는 것이다. 부모에서 처음에 파이프의 출구를 닫아놓고 시작했고, 이후 데이터를 모두 전송하면 파이프의 입구를 close 하면 이때 pipe를 통해서 EOF가 전달된다. 이 때 주의해야할 것은 부모단에서 입구, 출구 모두 close를 해줘야지만 자식에게 파이프를 통해 EOF 가 전달된다.
    - 우리의 서버는 파이프를 두 개 만들었었다. 이 떄 실수했던 점이 부모에서 닫아줘야할 파이프가 2개 였는데 하나만 닫아줬기 때문에 EOF가 파이프를 통해 전달되지 않았었고 block 상태에  빠져 무한 대기했었다.

- Authorization, WWW-Authorzation
    - 서버에는 Authontication 이라는 보안 관련된 헤더가 있다. 이 헤더는 클라이언트가 보안 구역(realm)에 해당하는 리소스를 요청하면 보안 관련 헤더를 담아서 응답으로 보낸다.
    - 클라이언트는 이 보안 관련 응답을 401 에러를 통해 받고, 브라우저가 이에 해당하는 id, password 팝업을 띄워줌으로써 입력을 받을 수 있게 해준다. 이제 엔터를 누르면 브라우저는 다시 웹서버한테 리퀘스트를 보내는데 이번에는 사용자가 입력한 아이디와 비밀번호가 `Authonticate` 헤더를 가지고 밸류 값으로 들어간다.(이떄 base64로 인코딩 되서 들어간다) 
    - 이 후 웹서버는 이 값을 base64로 디코딩 하고 auth_basic_user_file 파일에 입력되어 있는 값과 비교한다. 만약 값이 다르면 403 에러를 클라이언트에게 전송하고 값이 같다면 이제 보안 영역 페이지를 보여준다.

- Base64
    - Base64는 아스키(0 ~ 127) 값을 6비트 안에 몰아 넣어서 인코딩, 디코딩 하는 인코더? 다. base64로 나타낸다는 것은 입력된 값을 printable 하게 바꾼다는 것을 의미한다.
    - 일반 아스키 값을 base64로 인코딩 하는 첫 번째 과정은 8비트를 6비트로 변환하는거다. 3바이트(24비트)를 기준으로해서 6비트 4개(24비트). 3개의 문자(8비트 * 3 = 24) 4개의 문자(6비트 * 4 = 24비트)로 변환하는 것이다.
    
    
 -----
##### 8. 오늘 학습 내용에 대한 개인적인 총평
- 이제 60% 서버를 완성한 것 같다... 후...


-----

##### 9. 다음 학습 계획

- 웹서버 설계 및 구현
- 문제풀이
