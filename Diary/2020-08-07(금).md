### 2020-08-07

-----
##### 1. 학습 날짜
- 2020-08-07

-----
##### 2. 학습 시간
- 08:00 ~ 19:30
-----
###### 3. 학습 범위 및 주제
- exam rank04
- 철학자 문제

-----
##### 4. 동료 학습 방법
- slack

-----
##### 5. 학습 목표
- exam rank04 통과
- 철학자 문제 훑어보기

-----
##### 6. 과제 제출
- https://github.com/simian114/Philosophers

-----
##### 7. 상세 학습 내용

# 철학자 문제.

- 프로세스, 쓰레드에 대해 학습

<details><summary>규칙</summary><blockquote>

<details><summary>기본규칙</summary><blockquote>
  
  1. 철학자는 잠 -> 생각 -> 식사 ->잠.. 을 반복한다.
  2. 식사를 하기 위해서는 두 개의 포크가 필요하다.
  3. 한명의 철학자가 죽는 순간 프로그램이 종료된다.(옵션이 주어지면 죽기 전에도 프로그램이 종료될 수 있음)
  4. 철학자는 이름으로 숫자가 주어진다. 원횽으로 둘러싸 앉고 N번째 철학자 양 옆에는 N-1, N+1 철학자가 있어야한다.
  5. 모든 철학자의 상태는 아래와 같이 출력된다.
    ```
    ◦ timestamp_in_ms X has taken a fork
    ◦ timestamp_in_ms X is eating
    ◦ timestamp_in_ms X is sleeping
    ◦ timestamp_in_ms X is thinking
    ◦ timestamp_in_ms X died
    ```
  6. 모든 시간은 ms로 표시된다.
  7. 철학자가 죽으면 10ms 이내로 문구가 출력되어야한다.
  8. 철학자를 살려라!
  
</blockquote></details>
  
<details><summary>변수</summary><blockquote>
  
  1. number_of_philosophers: 철학자 수, 포크의 수
  2. time_to_die: 마지막 식사 이후 주어진 시간만큼 식사를 하지 못하면 철학자가 죽음
  3. time_to_eat: 식사 걸리는 시간.
  4. time_to_sleep: 잠자는 시간.
  5. number_of_times_each_philosopher_must_eat: ***옵션*** 이 옵션이 주어지면 한명이 죽기전에 모든 철학자가 ***최소한의 식사***를 하게 된다면 프로그램 종료
  
</blockquote></details>
</blockquote></details>
-----

- 시간은 ms로 해야한다.
- 하나의 프로세스 안에서 여러 쓰레드를 만들어야 한다.
- 쓰레드는 하나의 프로세스에서 실행되는 실행단위로 프로세스의 자원을 공유할 수 있다.


- 바이너리, 프로세스, 쓰레드
  - 바이너리
    - 바이너리란 저장장치에 기록되어 있는 프로그램
    - /bin 폴더에 들어가면 보이는 ```ls, grep``` 등이 바이너리 파일이다.
    - 바이너리들은 컴파일되어 ***실행할 준비가 된, 하지만 아직 실행되지 않는 프로그램이다!***
  - 프로세스
    - 프로세스는 ***실행된 바이너리를 표한하기 위한 운영체제의 추상 개념.***
    - 메모리에 적재되고 가상화된 메모리와 열린 FD, 연관된 사용자와 같은 커널 리소스 등을 포함한다.
  - 쓰레드
    - 쓰레드는 프로세스 내의 실행 단위.
    - 가상화된 프로세서, 스택, 프로그램 상태 등을 포함.
    
- 결론
  - ***프로세스는 실행 중인 바이너리이며 스레드는 운영체제의 프로세스 스켄줄러에 의해 스케줄링 될 수 있는 최소한의 실행 단위***
  
- 최신 운영체제는 가상 메모리와 가상 프로세서라는 두 가지 추상 개념을 제공
  - 이 둘은 실행 중인 각 프로세스가 머린의 리소스를 독점하고 있다고 착각하도록 만든다.
  - ***시스템의 RAM에는 100여 개가 넘는 실행중인 프로세스를 담을 수 있으나 각 프로세스는 가상 메모리를 통해 메모리 전체를 소유했다고 착각한다.***
  
- 각 프로세스는 메모리에 대한 하나의 유일한 시각을 갖는다. -> 왜냐면 각 프로세스는 자신이 유일하다고 착각하고 있기 때문.
  - 하지만 프로세스의 실행 단위인 쓰레드들은 자신들이 속해있는 프로세스의 자원을 공유할 수 있다. (모든 쓰레드는 메모리 주소 공간 전체를 공유)
  - 그리고 쓰레드는 스케줄링이 가능하기 때문에 단일 프로세스는 스케줄링을 통해 여러 쓰레드를 다루게 되고 여러 일을 동시에 수행할 수 있게 된다.


-----

##### 8. 오늘 학습 내용에 대한 개인적인 총평
- exam rank04에서 파이프 문제 때문에 조금 고생했지만 시간내에 완성을 할 수 있었다. 어제 미리 학습해 놓길 잘한거같다.
- 이후에는 철학자 문제를 조금 훑어봤다. minishell 과제를 진행할 때 전역변수가 제대로 동작하지 않는 문제를 겪은적이 있는데 이 부분은 프로세스 사이에서는 자원의 공유가 되지 않기 떄문이었다. 이 부분을 그때 당시에도 학습하긴 했지만 그려려니 하고 넘어갔었다. 하지만 오늘 쓰레드에 대한 학습을 하면서 자연스럽게 이 부분이 이해가 됐다. 컴퓨터 분야는 정말 너무 대단한거 같다. 가상이라는 개념을 발견해낸 사람한테 박수를 보낸다.


-----
##### 9. 다음 학습 계획
- 철학자 문제
- 쓰레드
