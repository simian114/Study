### 2020-05-12(화)

-----

##### 1. 학습 날짜

- 2020-05-12

-----

##### 2. 학습 시간

- 12:00 ~ 22:30

-----

##### 3. 학습 범위 및 주제

- 리눅스
- 네트워크

-----

##### 4. 동료 학습 방법

- slack

-----

##### 5. 학습 목표

- (실습과 그림으로 배우는)리눅스 구조 다 훑어보기.
- 네트워크 개념 공부

-----

##### 6. 과제 제출 주소

- X

-----

##### 7. 상세 학습 내용

- malloc 이 동작하는 방식
  -  피씬부터 얼마전의 minishell까지 malloc 함수는 정말 수 없이 많이 사용하는 함수였다. 많이 사용한 만큼 이 함수가 도대체 어떻게 동작하는지에 대해 궁금한 마음도 조금은 가지고 있었다. 마침 오늘 읽은 책에 이 내용이 나와 있었다. 기본적으로 프로그램을 실행 시키면 하나 또는 여러 개의 프로세스가 생성 된 다. 이 프로세스들은 각각이 자신의 메모리를 할당 받는다. 그리고 이 프로세스들은 받아 놓은 메모리에 더해서 추가적으로 메모리를 요구 할 때가 있는데 그게 바로 malloc 이다. 당연한거겠지만 메모리에 접근하는 것은 매우 위험한 일이다. 따라서 아무나 메모리에 접근이 가능하지 않다. 시스템에서 하드웨어를 작동하게 만드는 특정한 도구인 시스템 콜 이라는 녀석들을 이용해서 이러한 작업을 하는데, malloc을 사용하면 mmap라는 시스템 콜이 동작해서 메모리를 할당 해 준다.
- 가상 메모리와 물리 메모리.
  - 가상 메모리는 말 그대로 가상의 메모리이다. 그렇다면 왜 가상의 메모리가 필요한 것일까? 
  - 가상 메모리가 없을 때 발생하는 가장 간단한 예를 들어보자
    - 어떤 프로그램을 실행한다고 하자.
    - 이 프로그램을 실행하면 여러 개의 프로세스가 실행된다.
    - 프로세스가 실행 되면서 물리 메모리를 차지한다.
    - 하지만 cpu는 한번에 하나의 프로세스만을 실행 시킨다.
    - 따라서 현재 사용하지도 않고 있는 프로세스들에 의해 잡혀버린 메모리 들은 정말이지 쓸모가 없는 녀석들이 되어버린다.
    - 이런 상황에서 다른 프로그램을 실행 시킨다고 해보자.
    - 현재 쓸모 없게 메모리가 사용되고 있는데 새로 실행되는 프로그램도 사용하지 않는 메모리를 잡아버려서 메모리가 모자라는 상황이 발생하게 된다.
  - 아주 단순한 예를 들어 보았다.
  - 그렇다면 가상 메모리가 있으면 이러한 문제가 해결 될 수 있을까?
  - 그렇다 해결 할 수 있다.
  - 먼저 프로그램이 실행이 되면 가상 메모리에 필요한 메모리가 잡히게 된다.
  - 그럼 언제 물리 메모리가 사용이 되는 걸까?
  - 바로 직접적으로 메모리에 접근이 되면 그때서야 비로소 필요한 만큼 물리 메모리에 진짜로 할당이 되는거다.
  - 이런 방식으로 인해 쓸모 없는 메모리가 한번에 잡히지 않는 이점이 생긴다.
- 가상 메모리와 물리 메모리의 매핑?
  - 가상 메모리는 말 그대로 가상의 메모리다. 따라서 이 가상의 메모리가 실제로 물리 메모리의 어느 주소에 매핑이 되었다는 정보가 필요할 것이다. 이 정보들은 어디에 있는 걸까?
  - 바로 **페이지 테이블**에 존재한다. 이 페이지 테이블은 프로세스 마다 하나 씩 존재하게 된다.

- 캐시 메모리
  - 캐시 메모리가 왜 필요한가
  - 아주 빠르게 작업을 해야하는 상황을 생각해보자. 이 때 레지스터라고 하는 녀석을 이용해서 아주 빠른 작업을 한다. 이 작업 속도를 1 나노초라고 하자.
  - 작업을 하기 위해서는 메모리에서 CPU의 레지스터에 작업 내용을 보내고 CPU에서 작업을 한 다음에 다시 메모리로 결과 값을 write 해야 한다.
  - 여기서 문제가 생긴다. CPU의 레지스터에서의 작업 속도는 위에서 1 나노초라고 했다. 하지만 메모리에서 CPU로 작업 내용을 전송할 때와 결과 값을 메모리로 write하는 작업은 수십 나노초가 걸리게 된다. 따라서 입력과 출력의 과정에서 병목 현상이 발생해 버리는 것이다...
  - 이 문제를 어떻게 해결하지?
  - 바로 캐시 메모리다. 이 캐시 메모리를 이용하면 그 병목 현상을 완화 할 수 있다.

-----

##### 8. 오늘 학습 내용에 대한 개인적인 총평

- 리눅스부터 네트워크의 이론까지 조금 많은 분량을 공부했다. 실은 네트워크 공부는 학교 중간고사 대비 공부를한거다..ㅎㅎ 이 이론이라는게 보통의 예제와 같이 진행을 하면 재밌게 공부를 할 수 있는데 이 네트워크 공부는 정말로 너무 힘들다... 통신 규약은 무엇이고,.. 물리 계층에는 어떤게 존재하고... 머리가 너무 아프고 눈이 빠질것 같다..

-----

##### 9. 다음 학습 계획

- 리눅스 공부
- 네트워크 공부

